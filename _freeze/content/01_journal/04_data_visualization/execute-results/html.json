{
  "hash": "e19f96ba1536b6e40cf65e8560e53483",
  "result": {
    "markdown": "---\ntitle: \"Data Visualization\"\nauthor: \"Preethi Aranala\"\n---\n\n\n# 1.0 Libraries\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-1_289969e2fd56e88e487a722bf9654b53'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(lubridate)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(readr)\nlibrary(scales)\n```\n:::\n\n\n# 2.0 Importing Data from Web\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-2_065739a93bf503353d9bb8564ccb8648'}\n\n```{.r .cell-code}\ncovid_data_tbl <- read_csv(\"https://covid.ourworldindata.org/data/owid-covid-data.csv\")\ncovid_refined_tbl <- covid_data_tbl %>%\n  filter(location %in% c(\"Germany\",\"France\",\"Spain\",\"United States\",\"United Kingdom\")) %>%\n  select(location, date, total_cases, total_deaths)\n```\n:::\n\n\n# 3.0 Challenge 1\n\n# 3.1 Data Manipulation\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-3_306546f402d7f60ed585c00da1c58abd'}\n\n```{.r .cell-code}\ncovid_refined_tbl$date <- as.Date(covid_refined_tbl$date)\ncovid_refined_tbl <- covid_refined_tbl %>%\n  mutate(month = floor_date(date, unit = \"month\"),\n         day = day(date)) %>% \n  group_by(month) %>%\n  filter(day == max(day))\n\nmillion <- function(x) {\n  paste0(x / 1000000, \"M\")\n}\n```\n:::\n\n\n# 3.2 Data Visualization\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-4_82d4cdd3760d7b790ae75c716a94b90b'}\n\n```{.r .cell-code}\nggplot(covid_refined_tbl, aes(x = month, y = total_cases, color = location)) +\n  geom_line() +\n  labs(x = \"Month\", y = \"Cumulative Cases\", color = \"Country\") +\n  scale_x_date(date_breaks = \"1 month\", date_labels = \"%Y-%m\") +\n  scale_y_continuous(labels = million) +\n  theme(axis.text.x = element_text(angle = 45, hjust = 1)) +\n  labs(title = \"COVID-19 confirmed cases worldwide\")\n```\n:::\n\n\n# 4.0 Challenge 2\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-5_4611a57667add5d9b033d6a3a05086dd'}\n\n```{.r .cell-code}\nlibrary(maps)\n\nworld <- map_data(\"world\") \n```\n:::\n\n\n# 4.1 Data Manipulation\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-6_e29407e294b8d4e423016da9e9db7784'}\n\n```{.r .cell-code}\nlibrary(maps)\n\nworld <- map_data(\"world\") \n\ncovid_geo_tbl <- covid_data_tbl %>%\n  select(location, date, total_cases, total_deaths)\n\ncovid_geo_tbl$date <- as.Date(covid_geo_tbl$date)\ncovid_geo_tbl <- covid_geo_tbl %>%\n  mutate(month = floor_date(date, unit = \"month\"),\n         day = day(date)) %>% \n  group_by(month) %>%\n  arrange(desc(date)) %>%\n  na.omit() %>%\n  filter(date == \"2023-05-17\") %>%\n  mutate(case_fatality = total_deaths * 100/total_cases)\n\n\ncovid_geo_tbl$month <- NULL\ncovid_geo_tbl$day <- NULL\n\nworld_united <- covid_geo_tbl %>%\n  left_join(world, by = c(\"location\" = \"region\"), relationship = \"many-to-many\") %>%\n  \n  left_join(world_tbl, by = c(\"location\" = \"region\"), relationship = \"many-to-many\") %>%\n  mutate(location = case_when(\n    location == \"United Kingdom\" ~ \"UK\",\n    location == \"United States\" ~ \"USA\",\n    location == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n    TRUE ~ location\n  )) %>%\n  distinct()\n```\n:::\n\n\n# 4.2 Data Visualization\n\n\n::: {.cell hash='04_data_visualization_cache/html/unnamed-chunk-7_64b560803e2f018bbee55d75da4dd678'}\n\n```{.r .cell-code}\nggplot(world_united, aes(x = long, y = lat, map_id = location, fill = case_fatality)) +\n  geom_map(map = world, aes(fill = case_fatality, map_id = location, x = long, y = lat), color = \"black\") +\n  scale_fill_gradient(low = \"orange\", high = \"red\", na.value = \"gray\", name = \"Case Fatality Percent\") +\n  labs(title = \"Case Fatality Map\",\n       subtitle = \"as of 2023-05-17\") +\n  theme(axis.text = element_blank(),\n        axis.title = element_blank())\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}